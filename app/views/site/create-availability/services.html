{% extends '../../layouts/layout.html' %}

{% set pageName = "Add services to your session" %}

{% block beforeContent %}
{{ backLink({
  href: '/site/' + site_id + '/create-availability/time-and-capacity'
}) }}
{% endblock %}

{% block content %}


  <div class="nhsuk-grid-row">
    <div class="nhsuk-grid-column-two-thirds">
      <span class="nhsuk-caption-l">Add availability</span>
      <h1 class="nhsuk-heading-l">{{ pageName }}</h1>

      <form action="/site/{{ site_id }}/create-availability/check-answers" method="post">
        {% for groupId, group in data.serviceGroups %}
        <div class="nhsuk-form-group">

          <fieldset class="nhsuk-fieldset">
            <legend class="nhsuk-fieldset__legend nhsuk-fieldset__legend--s">
            {{ group.title }}
            </legend>
            <div class="nhsuk-checkboxes" data-module="nhsuk-checkboxes">

              {% for id, service in data.services %}
              {% if service.group == groupId %}
              <div class="nhsuk-checkboxes__item">
                <input class="nhsuk-checkboxes__input" id="service-{{ id }}" name="newSession[services]" type="checkbox" value="{{ id }}" data-checkbox-exclusive-group="services-list" {% if id in (data.newSession.services or []) %}checked{% endif %}>
                <label class="nhsuk-label nhsuk-checkboxes__label" for="service-{{ id }}"><span class="nhsuk-u-visually-hidden">Add </span>{{ service.name }}<span class="nhsuk-u-visually-hidden"> to your session</span></label>
              </div>
              {% endif %}
              {% endfor %}
            </div>
          </fieldset>
        </div>
        {% endfor %}

        {{ button({
          text: "Continue"
        }) }}
      </form>

    </div>
  </div>
{% endblock %}
